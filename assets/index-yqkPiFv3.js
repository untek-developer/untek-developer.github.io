var p=Object.defineProperty;var u=(n,e,t)=>e in n?p(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var d=(n,e,t)=>(u(n,typeof e!="symbol"?e+"":e,t),t);import{j as r,r as h}from"./index-tAxGdBJP.js";import{S as m}from"./StringHelper-9amm-GR6.js";import{H as y}from"./Html-D7heW40j.js";import{A as f,M as x}from"./AbstractApiClient-0xmu0Kex.js";import"./apiClient-Hrr0e7fx.js";class g{monthToString(e){return["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][e]}generateWorkDaysAgo(e){const t=Math.floor(e/365),s=e%365,o=Math.floor(s/30),c=m.declOfNum(t,["год","года","лет"]),a=m.declOfNum(o,["месяц","месяца","месяцев"]);let i=t?t+" "+c:"";return o&&(i=i+" "+o+" "+a),i.trim()}calculateWorkDays(e){const t={};let s=0;for(const c in e){const a=e[c];t[a.position]||(t[a.position]=0),t[a.position]=t[a.position]+a.workDays,s+=a.workDays}const o=[];for(const c in t){const a=t[c];o.push({position:c,days:a})}return{workDays:o,workDaysTotal:s}}}const l=new g;function D(n){const e=n.companyHistory,{workDays:t,workDaysTotal:s}=l.calculateWorkDays(e);return r.jsx(r.Fragment,{children:r.jsx("div",{className:"card mt-3",children:r.jsx("div",{className:"card-body",children:r.jsxs("ul",{children:[t.map(function(o,c){return r.jsxs("li",{children:[o.position,":  ",l.generateWorkDaysAgo(o.days)]},c)}),r.jsx("li",{children:r.jsxs("b",{children:["Общий стаж:  ",l.generateWorkDaysAgo(s)]})})]})})})})}function j(n){const e=n.item,t=l.generateWorkDaysAgo(e.workDays),s=l.monthToString(e.date.start.getMonth())+" "+e.date.start.getFullYear(),o=l.monthToString(e.date.end.getMonth())+" "+e.date.end.getFullYear();return r.jsxs(r.Fragment,{children:[s," - ",o," (",t,")"]})}function w(n){const e=n.companyHistory;return r.jsxs(r.Fragment,{children:[r.jsx(D,{companyHistory:e}),e.map(function(t,s){return r.jsx("div",{className:"card mt-3",children:r.jsxs("div",{className:"card-body",children:[r.jsx("h5",{className:"card-title",children:t.title}),r.jsxs("p",{className:"card-text",children:[t.location,t.isRemote?r.jsxs(r.Fragment,{children:[" ",r.jsx("small",{className:"badge111 badge-primary111",children:"(удаленная работа)"})]}):null,t.website?r.jsxs(r.Fragment,{children:[" | ",r.jsx("a",{href:t.website,target:"_blank",rel:"noreferrer",children:t.website})]}):null]}),r.jsx("p",{className:"card-text",children:r.jsx(j,{item:t})}),r.jsx("p",{className:"card-text",children:t.position?r.jsx(r.Fragment,{children:r.jsx("b",{children:t.position})}):null}),r.jsx("p",{className:"card-text",children:r.jsx(y,{children:t.descriptionHtml})})]})},s)})]})}function k(n,e){const s=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),o=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((o-s)/864e5)}function A(n){const e=new x({html:!0});n.description&&(n.descriptionHtml=e.render(n.description))}function M(n){const e=new Date(n.dateStart.year,n.dateStart.month-1,1),t=new Date(n.dateEnd.year,n.dateEnd.month-1,1);n.workDays=k(e,t)+30,n.date={start:new Date(n.dateStart.year,n.dateStart.month-1,1),end:new Date(n.dateEnd.year,n.dateEnd.month-1,1)},A(n)}function N(n){if(!n.dateEnd){const e=new Date,t=e.getFullYear(),s=e.getMonth();n.dateEnd={year:t,month:s+1}}}function S(n){for(const e in n){const t=n[e];N(t),M(t)}}class F extends f{constructor(){super(...arguments);d(this,"listUri","companies/list.json")}fetchAll(){return super.fetchAll().then(t=>{const s=structuredClone(t);return s.reverse(),S(s),s})}}const C=new F;function _(){const[n,e]=h.useState([]);return h.useEffect(()=>{C.fetchAll().then(t=>{e(t)})},[]),r.jsxs(r.Fragment,{children:[r.jsx("h1",{children:"Опыт работы"}),r.jsx(w,{companyHistory:n})]})}export{_ as default};

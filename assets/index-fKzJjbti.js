var u=Object.defineProperty;var d=(e,t,a)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var c=(e,t,a)=>(d(e,typeof t!="symbol"?t+"":t,a),a);import{r as l,j as n}from"./index-tAxGdBJP.js";import{H as f}from"./Html-D7heW40j.js";import{S as h}from"./StringHelper-9amm-GR6.js";import{a as i}from"./apiClient-Hrr0e7fx.js";import{A as p,V as b}from"./aboutContactRender-Jo-OdejL.js";import{A as x,M as g}from"./AbstractApiClient-0xmu0Kex.js";class j{getAge(t){const a=new Date,o=new Date(t);let r=a.getFullYear()-o.getFullYear();const s=a.getMonth()-o.getMonth();return(s<0||s===0&&a.getDate()<o.getDate())&&r--,r}}const m=new j;function M(){const[e,t]=l.useState([]);return l.useEffect(()=>{i.getJson("contacts/list.json").then(a=>{t(a.contacts)})}),n.jsx(p,{contacts:e??[]})}function A({contacts:e}){return n.jsx("ul",{children:e.map(function(t,a){if(!(t.hasOwnProperty("isMain")&&t.isMain))return null;let r=b.emailIsValid(t.url),s=t.url;return r&&(s="mailto:"+s),n.jsxs("li",{style:{listStyleType:"none"},children:[t.icon?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:t.icon})," "]}):null,s?n.jsx("a",{href:s,target:"_blank",rel:"noreferrer",children:t.label?t.label:t.url}):n.jsx("span",{children:t.label})]},a)})})}function w(e){const t=e.entity,a=t.gender==="male"?"Мужчина":"Женщина",o=new Date(t.birthday),r=m.getAge(t.birthday),s=h.declOfNum(r,["год","года","лет"]);return n.jsxs(n.Fragment,{children:[n.jsx("h1",{children:t.fullName}),n.jsx("img",{src:t.photo,alt:"Мое фото",title:"Мое фото",style:{width:"200px"},className:"float-right rounded ml-3"}),n.jsxs("p",{children:[a,", ",r," ",s," (",o.toLocaleDateString(),")"]}),n.jsxs("p",{children:["Желаемая должность: ",n.jsx("b",{children:t.position})]}),n.jsx("div",{className:"mb-3",children:n.jsx(f,{children:t.aboutMe})}),n.jsx("h2",{className:"card-title",children:"Контакты"}),t.contacts?n.jsx(A,{contacts:t.contacts}):n.jsx(M,{})]})}function y(e){const t=new g;e.aboutMeMd&&(e.aboutMe=t.render(e.aboutMeMd))}async function C(e){if(e.aboutMeRef){const t=e.aboutMeRef.split(".").pop(),a=await i.getText(e.aboutMeRef);t.toLowerCase()==="md"?e.aboutMeMd=a:e.aboutMe=a}return y(e),e}class D extends x{constructor(){super(...arguments);c(this,"listUri","about/about.json")}fetchAll(){return super.fetchAll().then(a=>C(a))}}const R=new D;function T(){const[e,t]=l.useState({});return l.useEffect(()=>{R.fetchAll().then(a=>{t(a)})},[]),n.jsx(n.Fragment,{children:n.jsx(w,{entity:e})})}export{T as default};
